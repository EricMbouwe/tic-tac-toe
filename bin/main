#!/usr/bin/env ruby

gameboard = [
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------']
]

puts 'Welcome to the Tic Tac Toe game'
puts 'I hope that you will have fun :('
puts

puts 'Player 1, enter your name please'
player1 = gets.chomp
puts

puts 'Player 2, enter your name please'
player2 = gets.chomp
puts

puts "#{player1.capitalize} choose 'X' or 'O'"
$choice = gets.chomp

until $choice.include?('X') || $choice.include?('O')
  puts "wrong value, choose 'X' or 'O'."
  $choice = gets.chomp
end
if $choice == 'X'
  $choice2 = 'O'
elsif $choice == 'O'
  $choice2 = 'X'
end

puts "\nCool! #{player1.capitalize}'s move is represented by '#{$choice}' and #{player2.capitalize}'s move is represented by '#{$choice2}'."
puts "\nNow, choose a number on the board to make your move\n\n"

puts '-------------'
puts '| 1 | 2 | 3 |'
puts '-------------'
puts '| 4 | 5 | 6 |'
puts '-------------'
puts '| 7 | 8 | 9 |'
puts '-------------'

def display_board(gameboard)
  gameboard.each do |row|
    row.each do |c|
      print c
    end
    puts
  end
end

def placement(gameboard, pos, player)
  sym = ''
  sym = " #{$choice} " if player == 'player1'
  sym = " #{$choice2} " if player == 'player2'

  if pos == 1
    gameboard[1][1] = sym
  elsif pos == 2
    gameboard[1][3] = sym
  elsif pos == 3
    gameboard[1][5] = sym
  elsif pos == 4
    gameboard[3][1] = sym
  elsif pos == 5
    gameboard[3][3] = sym
  elsif pos == 6
    gameboard[3][5] = sym
  elsif pos == 7
    gameboard[5][1] = sym
  elsif pos == 8
    gameboard[5][3] = sym
  elsif pos == 9
    gameboard[5][5] = sym
  else
    puts 'Wrong position given, enter a number between 1 and 9'
    while pos < 1 || pos > 9
      puts 'Try again'
      pos = gets.chomp.to_i
    end
  end
end

loop do
  puts "\n#{player1.capitalize}, make your move"
  pos1 = gets.chomp.to_i
  placement(gameboard, pos1, 'player1')
  puts 'Now your move is displayed on the board !'
  display_board gameboard

  puts "#{player2.capitalize}, make your move"
  pos2 = gets.chomp.to_i
  placement(gameboard, pos2, 'player2')
  puts 'Now your move is displayed on the board !'
  display_board gameboard
end
