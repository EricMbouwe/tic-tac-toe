#!/usr/bin/env ruby

gameboard = [
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------'],
  ['|', '   ', '|', '   ', '|', '   ', '|'],
  ['-------------']
]

puts 'Player 1, enter your name please'
player1 = gets.chomp

puts 'Player 2, enter your name please'
player2 = gets.chomp

puts "#{player1} choose 'X' or 'O'"
choice1 = gets.chomp
choice2 = ''

until choice1.include?('X') || choice1.include?('O')
  puts "wrong value, choose 'X' or 'O'."
  choice1 = gets.chomp
end
if choice1 == 'X'
  choice2 = 'O'
elsif choice1 == 'O'
  choice2 = 'X'
end

puts "\nChoose a number on the board to make your move\n\n"

puts '-------------'
puts '| 1 | 2 | 3 |'
puts '-------------'
puts '| 4 | 5 | 6 |'
puts '-------------'
puts '| 7 | 8 | 9 |'
puts '-------------'

def display_board(gameboard)
  gameboard.each do |row|
    row.each do |c|
      print c
    end
    puts
  end
end

def placement(gameboard, pos, player)
  choice = ''
  choice = ' X ' if player == 'player1'
  choice = ' O ' if player == 'player2'

  if pos == 1
    gameboard[1][1] = choice
  elsif pos == 2
    gameboard[1][3] = choice
  elsif pos == 3
    gameboard[1][5] = choice
  elsif pos == 4
    gameboard[3][1] = choice
  elsif pos == 5
    gameboard[3][3] = choice
  elsif pos == 6
    gameboard[3][5] = choice
  elsif pos == 7
    gameboard[5][1] = choice
  elsif pos == 8
    gameboard[5][3] = choice
  elsif pos == 9
    gameboard[5][5] = choice
  else
    puts 'wrong position given, enter a number between 1 and 9'
    while pos < 1 || pos > 9
      puts 'try again'
      pos = gets.chomp.to_i
    end
  end
end

loop do
  puts "\n#{player1}, make your move"
  pos1 = gets.chomp.to_i
  placement(gameboard, pos1, 'player1')
  display_board gameboard

  puts "#{player2}, make your move"
  pos2 = gets.chomp.to_i
  placement(gameboard, pos2, 'player2')
  display_board gameboard
end
